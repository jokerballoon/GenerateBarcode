
@{
    Layout = null;
    ViewData["Title"] = "Generate Barcode";
}

<style>
</style>
<h1>Generate Barcode</h1>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/jsbarcode/3.6.0/barcodes/JsBarcode.code128.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.css">
<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="//code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script>

<svg id="code128"></svg>
<h2>ปรับ device เป็นแนวนอนเพื่อแสดง barcode</h2>
<!--h1 id="orientation">orientationchange Not Supported on this Device.</h1-->
<script>
// Bind an event to window.orientationchange that, when the device is turned,
// gets the orientation and displays it to on screen.
$( window ).on( "orientationchange", function( event ) {
  //$( "#orientation" ).text( "This device is in " + event.orientation + " mode!" );
  if (event.orientation == "portrait") {
    $("svg").hide();
    $("h2").show();
  }else{
    $("svg").show();
    $("h2").hide();
  }
});
// You can also manually force this event to fire.
$( window ).orientationchange();
</script>
<script>
    JsBarcode("#code128",
        //"|010754800025100\r\n5807010002753714\r\n3969807000606362\r\n0",
        "|010754800025100\r\n" + @ViewBag.csNo + "\r\n" + @ViewBag.contractNo+ "\r\n0",
        {
            //textAlign: "left",
            //textPosition: "top",
            //font: "cursive",
            //fontOptions: "bold",
            //fontSize: 40,
            //textMargin: 15,
            text: "|010754800025100 " + @ViewBag.csNo + " " + @ViewBag.contractNo + " 0"
        });
</script>
<script>
    function detectmob() {
        if (window.innerWidth <= 800 && window.innerHeight <= 600) {
            return true;
        } else {
            return false;
        }
    }
</script>
<script>
    if (screen.orientation.angle == "0") {
        $("svg").hide();
        $("h2").show();
    } else {
        $("svg").show();
        $("h2").hide();
    }

    if (detectmob()) {
        $("svg").hide();
        $("h2").show();
    } else {
        $("svg").show();
        $("h2").hide();
    }
    

    window.addEventListener("orientationchange", function () {
        //alert("the orientation of the device is now " + screen.orientation.angle);
        if (screen.orientation.angle == "0") {
            $("svg").hide();
            $("h2").show();
        } else {
            $("svg").show();
            $("h2").hide();
        }
    });
</script>
